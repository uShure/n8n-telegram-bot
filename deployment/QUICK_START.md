# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - n8n Telegram Bot

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞ 10 –º–∏–Ω—É—Ç

### 1Ô∏è‚É£ –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
ssh root@–í–ê–®_IP_–ê–î–†–ï–°
```

### 2Ô∏è‚É£ –°–∫–∞—á–∞–π—Ç–µ –∏ —Ä–∞—Å–ø–∞–∫—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
mkdir -p /opt/n8n-telegram-bot
cd /opt/n8n-telegram-bot

# –†–∞—Å–ø–∞–∫—É–π—Ç–µ –∞—Ä—Ö–∏–≤ –ø—Ä–æ–µ–∫—Ç–∞ (–∑–∞–≥—Ä—É–∑–∏—Ç–µ —á–µ—Ä–µ–∑ SFTP –∏–ª–∏ wget)
# –ò–ª–∏ —Å–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```

### 3Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É
```bash
chmod +x scripts/install.sh
./scripts/install.sh
```

### 4Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω
cp deployment/.env.production deployment/.env

# –û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
nano deployment/.env
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:**
```env
# –ü–∞—Ä–æ–ª–∏ (–ø—Ä–∏–¥—É–º–∞–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ!)
POSTGRES_PASSWORD=–≤–∞—à_—Å–ª–æ–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å_–¥–ª—è_–ë–î
REDIS_PASSWORD=–≤–∞—à_—Å–ª–æ–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å_–¥–ª—è_redis
N8N_BASIC_AUTH_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å_–¥–ª—è_–≤—Ö–æ–¥–∞_–≤_n8n

# –í–∞—à –¥–æ–º–µ–Ω
N8N_HOST=n8n.–≤–∞—à–¥–æ–º–µ–Ω.ru
N8N_WEBHOOK_URL=https://n8n.–≤–∞—à–¥–æ–º–µ–Ω.ru/
N8N_EDITOR_BASE_URL=https://n8n.–≤–∞—à–¥–æ–º–µ–Ω.ru/

# Telegram
TELEGRAM_BOT_TOKEN=—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather

# Google Sheets
GOOGLE_SHEET_ID=id_–≤–∞—à–µ–π_—Ç–∞–±–ª–∏—Ü—ã
GOOGLE_CLIENT_ID=–≤–∞—à_client_id
GOOGLE_CLIENT_SECRET=–≤–∞—à_client_secret

# DeepSeek
DEEPSEEK_API_KEY=–≤–∞—à_api_–∫–ª—é—á

# Email –¥–ª—è SSL
CERTBOT_EMAIL=–≤–∞—à@email.ru
```

### 5Ô∏è‚É£ –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
```bash
# –í–æ–∑—å–º–∏—Ç–µ –∫–ª—é—á –∏–∑ —Ñ–∞–π–ª–∞ .env.generated
cat .env.generated
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É N8N_ENCRYPTION_KEY=... –≤ –≤–∞—à .env —Ñ–∞–π–ª
```

### 6Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É
```bash
cd /opt/n8n-telegram-bot
docker-compose -f deployment/docker-compose.yml up -d
```

### 7Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
```bash
./scripts/setup-ssl.sh n8n.–≤–∞—à–¥–æ–º–µ–Ω.ru –≤–∞—à@email.ru
```

### 8Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: https://n8n.–≤–∞—à–¥–æ–º–µ–Ω.ru

## üì± –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ –≤ n8n

### 1. –í–æ–π–¥–∏—Ç–µ –≤ n8n
- URL: https://n8n.–≤–∞—à–¥–æ–º–µ–Ω.ru
- –õ–æ–≥–∏–Ω: admin (–∏–ª–∏ –∏–∑ .env)
- –ü–∞—Ä–æ–ª—å: –∏–∑ .env —Ñ–∞–π–ª–∞

### 2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ workflow
1. –ù–∞–∂–º–∏—Ç–µ **Workflows** ‚Üí **Import**
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª `workflows/telegram-bot-deepseek.json`
3. –ù–∞–∂–º–∏—Ç–µ **Import**

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

#### Telegram:
1. –î–≤–∞–∂–¥—ã –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ª—é–±—É—é Telegram –Ω–æ–¥—É
2. –í Credentials –Ω–∞–∂–º–∏—Ç–µ **Create New**
3. –í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
4. –ù–∞–∂–º–∏—Ç–µ **Create**

#### Google Sheets:
1. –î–≤–∞–∂–¥—ã –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ Google Sheets –Ω–æ–¥—É
2. –í Credentials –Ω–∞–∂–º–∏—Ç–µ **Create New**
3. –í—ã–±–µ—Ä–∏—Ç–µ **OAuth2**
4. –í—Å—Ç–∞–≤—å—Ç–µ Client ID –∏ Secret
5. –ù–∞–∂–º–∏—Ç–µ **Connect**
6. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ Google

#### DeepSeek API:
1. –í –Ω–æ–¥–µ **DeepSeek API**
2. –í Headers –Ω–∞–π–¥–∏—Ç–µ **Authorization**
3. –ó–∞–º–µ–Ω–∏—Ç–µ `YOUR_DEEPSEEK_API_KEY` –Ω–∞ –≤–∞—à –∫–ª—é—á

### 4. –û–±–Ω–æ–≤–∏—Ç–µ ID —Ç–∞–±–ª–∏—Ü—ã
–í–æ –≤—Å–µ—Ö Google Sheets –Ω–æ–¥–∞—Ö –∑–∞–º–µ–Ω–∏—Ç–µ `YOUR_GOOGLE_SHEET_ID` –Ω–∞ ID –≤–∞—à–µ–π —Ç–∞–±–ª–∏—Ü—ã

### 5. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ workflow
–ù–∞–∂–º–∏—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å **Active** –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É

### 6. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ webhook
```bash
# –ü–æ–ª—É—á–∏—Ç–µ URL webhook –∏–∑ n8n (Telegram Trigger –Ω–æ–¥–∞)
# –ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
curl "https://api.telegram.org/bot{–í–ê–®_–¢–û–ö–ï–ù}/setWebhook?url={WEBHOOK_URL}"
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤–∞—à –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –µ–≥–æ –≤ Telegram.

## üõ† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–¥–æ–±–Ω–æ–µ –º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```bash
/opt/n8n-telegram-bot/scripts/manage.sh
```

## üìû –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
cd /opt/n8n-telegram-bot
docker-compose -f deployment/docker-compose.yml logs -f
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:
```bash
docker-compose -f deployment/docker-compose.yml ps
```

3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–æ–ø—Ü–∏—è 5 –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤)

## üîê –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã

- **–ü–∞—Ä–æ–ª–∏**: `/opt/n8n-telegram-bot/deployment/.env`
- **–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏**: `/backup/n8n/`
- **–õ–æ–≥–∏**: `/var/log/n8n-*.log`

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ .env —Ñ–∞–π–ª –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ!**
